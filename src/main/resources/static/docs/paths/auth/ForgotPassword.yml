post:
  operationId: initiatePasswordReset
  tags: [ 'Autenticação - Recuperação de Senha' ]
  summary: Inicia o processo de redefinição de senha enviando um código OTP por SMS.
  description: |
    Inicia o processo de redefinição de senha para o usuário associado ao número de telefone fornecido.
    Um código OTP (One-Time Password) de 6 dígitos será enviado via SMS para o número, se ele estiver cadastrado.
    O código OTP é válido por 10 minutos. Use o `otpSessionId` retornado para validar o código na próxima etapa.
  requestBody:
    description: Corpo da requisição contendo o número de telefone do usuário.
    required: true
    content:
      application/json:
        schema:
          $ref: '../../components/schemas/password/ForgotPasswordRequestDto.yml'
  responses:
    202:
      description: |
        Processo iniciado com sucesso. Retorna o `otpSessionId` para validação do código OTP.
        É retornado um `otpSessionId` inválido caso o número não esteja cadastrado, para evitar 
        vazamento de informações. Sendo assim o `otpSessionId` será validado na próxima etapa.
      content:
        application/json:
          schema:
            $ref: '../../components/schemas/password/PasswordResetTokenResponseDto.yml'
    400:
      description: Erro lançado quando os dados de entrada forem inválidos.
      content:
        application/json:
          schema:
            $ref: '../../components/schemas/error/ErrorResponseDto.yml'
          examples:
            InvalidFormatPhone:
              summary: Número de Telefone com Formato Inválido
              value:
                timestamp: "2024-06-15T14:30:00Z"
                status: 400
                errorCode: "VALIDATION_FAILED"
                developerMessage: "A validação falhou. Verifique os detalhes dos campos para mais informações."
                path: "/api/auth/forgot-password"
                fieldErrors:
                  - fieldName: "phone"
                    errorCode: "PHONE_REQUIRED"
                    developerMessage: "O número de telefone é obrigatório."
                  - fieldName: "phone"
                    errorCode: "PHONE_INVALID_FORMAT"
                    developerMessage: "O número de telefone não está em um formato válido. Use o padrão internacional E.164 (ex: +5511987654321)."
            InvalidPhone:
              summary: Telefone com código de país inválido ou número inválido
              value:
                timestamp: "2024-06-15T14:30:00Z"
                status: 400
                errorCode: "PHONE_INVALID"
                developerMessage: "O número de telefone é inválido. Verifique o código do país e o número."
                path: "/api/auth/forgot-password"
    500:
      $ref: '../../components/responses/InternalServerError.yml'